<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="smileicon32.webp" sizes="32x32">
    <link rel="icon" href="smileicon192.webp" sizes="192x192">
    <title>Smile Wink Quickstart</title>
</head>

<body>
    <script src="https://web.smileapi.io/v2/smile.v2.js"></script>
    <script>

        function getInitParamJsonString() {
            const reg = new RegExp('(^|&)initParam=([^&]*)(&|$)', 'i');
            const r = window.location.search.substr(1).match(reg);
            if (r != null) {
                return unescape(r[2]);
            }
            return null;
        }
        const data = JSON.parse(getInitParamJsonString());
        const smileLinkModal = new SmileLinkModal({
            enableUpload: false,
            apiHost: data.apiHost,
            userToken: data.userToken,
            
            onClose: () => {
                console.log('Link closed')
                window.webkit.messageHandlers.onClose.postMessage('Link closed');
            }
        });
        smileLinkModal.open();
    </script>
</body>

</html>
